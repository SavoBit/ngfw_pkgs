require 'rake/rdoctask'
require 'rake/testtask'
require 'rake/contrib/sshpublisher'

module Mocha
  VERSION = "0.5.2"
end

desc "Run all tests"
task :default => :test_all

task :test_all => [:test_unit, :test_integration, :test_acceptance]

desc "Run unit tests"
Rake::TestTask.new(:test_unit) do |t|
  t.libs << 'test'
  t.test_files = FileList['test/unit/**/*_test.rb']
  t.verbose = true
  t.warning = true
end

desc "Run integration tests"
Rake::TestTask.new(:test_integration) do |t|
  t.libs << 'test'
  t.test_files = FileList['test/integration/*_test.rb']
  t.verbose = true
  t.warning = true
end

desc "Run acceptance tests"
Rake::TestTask.new(:test_acceptance) do |t|
  t.libs << 'test'
  t.test_files = FileList['test/acceptance/*_test.rb']
  t.verbose = true
  t.warning = true
end

desc 'Generate RDoc'
Rake::RDocTask.new do |task|
  task.main = 'README'
  task.title = 'Mocha'
  task.rdoc_dir = 'doc'
  task.template = File.expand_path(File.join(File.dirname(__FILE__), "templates", "html_with_google_analytics"))
  task.rdoc_files.include('README', 'RELEASE', 'COPYING', 'MIT-LICENSE', 'agiledox.txt', 'lib/mocha/auto_verify.rb', 'lib/mocha/mock.rb', 'lib/mocha/expectation.rb', 'lib/mocha/object.rb', 'lib/mocha/parameter_matchers.rb', 'lib/mocha/parameter_matchers')
end
task :rdoc => :examples

