
exec >> /var/log/untangle-net-alpaca/modprobe.log 2>&1

MODULES="nf_conntrack \
         nf_conntrack_h323      nf_conntrack_netbios_ns \
         nf_conntrack_proto_gre nf_conntrack_tftp\
         nf_conntrack_amanda    nf_conntrack_ipv4\
         nf_conntrack_netlink   nf_conntrack_proto_sctp\
         nf_conntrack_ftp       nf_conntrack_irc\
         nf_conntrack_pptp      nf_conntrack_sip
         nf_nat                 nf_nat_ftp\
         nf_nat_irc             nf_nat_proto_gre\
         nf_nat_snmp_basic      nf_nat_amanda\
         nf_nat_h323            nf_nat_pptp\
         nf_nat_sip             nf_nat_tftp"

for module in $MODULES ; do 
    modprobe $module
    if [ "$?" -gt 0 ]; then
        echo "ERROR loading module $module"
        exit 1
    else
        echo "$module loaded successfully."
    fi
done

exit 0
